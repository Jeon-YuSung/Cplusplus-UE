# 7장 프로그램 완성
## 7-1 소개
6장에서 만든 계산기가 어느정도 '합리적으로' 작동한다면 절반정도 왔다. 즉, '기본적인' 동작을 수행하기 때문이다. <br>
이제 7장에서는 6장에서 만든 계산가리를 개선할만 사항을 소개한다. <br>
요구 사항과 제약 사항을 바탕으로 점점 현실의 프로그램에, 코드를 점진적으로 개선해나가는 과정이다. <br>

-------------------------------------------------------------------------
## 7-2 입출력
6장에서 프롬프트로 사용자에게 <br>
표현식 : <br>
결과 : <br>
이런식으로 하기로 했다. 

프로그램을 실행시켜보면 이런 요구 사항을 다 잊어버릴 수 있지만... 뭐 항상 늘 있는 닐이다. 사람은 모든걸 기억할 수 없기 때문에... <br>
아무튼 프로그래밍 작업에 따라서는 초기 요구 사항을 수정할 수 없는 경우도 있지만, 이는 너무 엄격한 정책으로 프로그램이 해결해야 할 문제의 관점에서 봤을 때 엉터리 프로그램으로 귀결될 수밖에 없다 <br>
프로그램이 해야 할 일을 생각함에 있어서 프로그램의 정확한 요구 사항을 변경할 수 있다고 가정하고, 위에 있는 프롬프트처럼 나오길 원하는가?를 고민해보자. 그리고 직접 시도하는 것이 좋다. <br>
사람마다 어떤 스타일을 선호할지 다르지만 간단한 계산기에 하나로 정하자 <br>
실제 표현식과 계산 결과에 방해를 주면 안되고, 어떻게든 사용자 입력과 컴퓨터의 출력을 구분하지 않으면 혼란스러울 수 있으니, 디버깅 초반에 결과를 나타내는 지시자(Indicator)로 \=를 사용했지만, 프로그럼 입력을 필요하다고 하는 의미의 지시자를 추가하자 주로 \>를 많이 사용한다. 

```
수정전
표현식 : 2+3; 5+7; 2+9;
결과 : 5
표현식 : 결과 : 35
표현식 : 결과 : 11
표현식 :

수정 후 
> 2+3;
= 5
> 5*7;
= 35
```

깔끔해보인다. 이제 메인을 다시 수정해보자 
```cpp
double val = 0;
while(cin){
  cout <<"> "; //프롬프트 출력 
  Token t = ts.get();
  if(t.kind == 'q') {
    break;
  }
  if(t.kind == ';'){ 
    cout << "= " << val << endl; //결과 출력 
  }
  else{
  ts.putback(t);
  }
  val = expression();
}
```
실행해보면 처음보단 괜찮아졌지만 아직도 수정해야할 부분이 있다. <br>
일단 이정도로만 만족하자. 

------------------------------------------------------------------------------
## 7-3 오류처리
가능한 많은 오류를 찾아 고쳐라, 테스팅을 해라 <br>
올바른 입력과 잘못된 입력을 넣어 계속 테스팅해라. <br>
테스팅은 SW개발에 있어서 매우 중요하다. <br>
또한, 모든 프로그램에 들어맞는 답은 없다 그러나 진지하게 테스팅을 한다면 더 많은 프로그램에서 더 나은 테스트를 할 수 있다 이런 방법 중 하나가 테스트 케이스를 체계적으로 만드는 방법이다. <br>
만약에 테스트를 했는데도, 부족한 경우에는 '비합리적' 테스팅을 수행해라 <br>
이상적인 프로그램은 **합리적인 오류**는 물론이고,  **비정상적인 오류**를 포함한 모든 오류를 찾아낼 수 있어야한다. <br>

```
+1;
()
!+2
```

위의 내용을 입력하면 창이 즉시 닫힌다. 즉, 오류 메시지를 출력한 후에 프로그램이 바로 종료한다. <br>
하지만, 창을 열려있게 하는 수단으로 사용자의 입력을 요구하지만, 위의 경우에는 모든 문자를 다 읽기 전에 프로그램에 오류가 발생한다. <br>
"창을 닫으려면 문자를 입력하세요"라는 프롬프트에 대한 응답으로 받아들여야 할 문자가 이미 입력 스트림에 남아 있기 때문에 창이 바로 닫히게 된다. 그럼 다시 메인 부분을 수정해보자. <br>



## 7-4 음수 
